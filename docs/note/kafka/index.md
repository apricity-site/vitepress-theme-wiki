---
note: true  
title: Kafka
baseCategory: 后端
category: 中间件
---

## 什么是事件流？

从技术上讲，事件流是从数据库、传感器、移动设备、云服务和软件应用程序等事件源以事件流的形式实时捕获数据的做法；持久地存储这些事件流以供以后检索；实时和回顾性地操作、处理和响应事件流；并根据需要将事件流路由到不同的目标技术。因此，事件流可确保数据的连续流动和解释，以便正确的信息在正确的时间出现在正确的位置。

## 我们可以使用事件流做什么？

事件流应用于 众多行业和组织的[各种用例]([Apache Kafka](https://kafka.apache.org/powered-by))。它的许多例子包括：

- 实时处理支付和金融交易，例如在证券交易所、银行和保险中。
- 实时跟踪和监控汽车、卡车、车队和货物，例如物流和汽车行业。
- 持续捕获和分析来自 IoT 设备或其他设备（例如工厂和风电场）的传感器数据。
- 收集客户互动和订单并立即做出反应，例如在零售、酒店和旅游行业以及移动应用程序中。
- 监测住院病人并预测病情变化，以确保在紧急情况下得到及时治疗。
- 连接、存储和提供公司不同部门产生的数据。
- 作为数据平台、事件驱动架构和微服务的基础。



## kafka的作用

1. 要**发布**（写）和**订阅**（读）流事件，包括来自其他系统的数据的持续导入/导出的。
2. 为了**存储**持久和可靠的事件流，只要你想要的。
3. 在事件发生时或追溯性地**处理**事件流。

所有这些功能都是以分布式、高度可扩展、弹性、容错和安全的方式提供的。Kafka 可以部署在裸机硬件、虚拟机和容器上，也可以部署在本地和云端。您可以在自行管理 Kafka 环境和使用各种供应商提供的完全托管服务之间进行选择。



## 简而言之，Kafka 是如何工作的？

Kafka 是一个分布式系统，由通过高性能[TCP 网络协议进行]([Apache Kafka](https://kafka.apache.org/protocol.html))通信的**服务器**和**客户端**组成。它可以部署在内部和云环境中的裸机硬件、虚拟机和容器上。

**服务器**：Kafka 作为一个或多个服务器的集群运行，这些服务器可以跨越多个数据中心或云区域。其中一些服务器形成存储层，称为代理（brokers）。其他服务器运行 [Kafka Connect]([Apache Kafka](https://kafka.apache.org/documentation/#connect))以将数据作为事件流持续导入和导出，以将 Kafka 与您现有的系统（例如关系数据库以及其他 Kafka 集群）集成。为了让您实现关键任务用例，Kafka 集群具有高度可扩展性和容错性：如果其中任何一个服务器出现故障，其他服务器将接管它们的工作，以确保连续运行而不会丢失任何数据。

**客户端**：它们允许您编写分布式应用程序和微服务，即使在网络问题或机器故障的情况下，它们也可以并行、大规模和容错方式读取、写入和处理事件流。



## 主要概念和术语

事件记录了世界上或你的业务中“发生了一些事情”的事实。在文档中也称为记录或消息。当你向Kafka读或写数据时，你以事件的形式来完成。从概念上讲，事件具有键、值、时间戳和可选的元数据标头。下面是一个例子:

- Event key: "Alice"
- Event value: "Made a payment of $200 to Bob"
- Event timestamp: "Jun. 25, 2020 at 2:06 p.m."

**生产者**是那些向Kafka发布(写入)事件的客户端应用程序，而**消费者**是那些订阅(读取和处理)这些事件的客户端应用程序。在Kafka中，生产者和消费者彼此**完全解耦**和**不可知**，这是实现Kafka所周知的高可伸缩性的关键设计元素。例如，生产者从不需要等待消费者。Kafka提供了各种保证，比如**只处理一次事件的能力。**



事件被组织并持久地存储在**Topic**中。非常简单，主题类似于文件系统中的文件夹，而事件就是该文件夹中的文件。一个示例主题名称可以是“payments”。**Kafka中的主题总是多生产者和多订阅者:一个主题可以有零个、一个或多个生产者向它写入事件，也可以有零个、一个或多个消费者订阅这些事件。** 可以根据需要经常读取主题中的事件——与传统消息传递系统不同，事件在使用后不会被删除。相反，您可以通过每个主题的配置设置来定义Kafka应该保留您的事件多长时间，过期的事件将被丢弃。Kafka的性能与数据大小是一致的，所以长时间存储数据是完全没问题的。




